<!DOCTYPE html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.63" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://docs.monumental.app/original/aws.html"><meta property="og:title" content="AWS"><meta property="og:description" content="Update ECR (Amazon Elastic Container Repository) In order to run the latest images, we need to upload them to AWS. From devnet, go to mnt directory and run the folling command :..."><meta property="og:type" content="article"><meta property="og:locale" content="en-US"><meta property="og:updated_time" content="2023-06-29T09:38:18.000Z"><meta property="article:author" content="Monumental Team"><meta property="article:tag" content="Page config"><meta property="article:tag" content="Guide"><meta property="article:published_time" content="2020-01-01T00:00:00.000Z"><meta property="article:modified_time" content="2023-06-29T09:38:18.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"AWS","image":[""],"datePublished":"2020-01-01T00:00:00.000Z","dateModified":"2023-06-29T09:38:18.000Z","author":[{"@type":"Person","name":"Monumental Team"}]}</script><link rel="icon" href="logo.png"><title>AWS</title><meta name="description" content="Update ECR (Amazon Elastic Container Repository) In order to run the latest images, we need to upload them to AWS. From devnet, go to mnt directory and run the folling command :...">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-d8aa4767.css" as="style"><link rel="stylesheet" href="/assets/style-d8aa4767.css">
    <link rel="modulepreload" href="/assets/app-85cd6e35.js"><link rel="modulepreload" href="/assets/aws.html-2d669d6b.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-c27b6911.js"><link rel="modulepreload" href="/assets/aws.html-6dae5c98.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand" href="/"><img class="vp-nav-logo" src="/monumental.png" alt><!----><!----></a><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a class="vp-link nav-link" href="/"><!---->Monumental<!----></a></div><div class="nav-item hide-in-mobile"><a class="vp-link nav-link" href="/started/"><!---->Documentation<!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><!----><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><!----><span class="vp-sidebar-title">Get Started</span><!----></p><ul class="vp-sidebar-links"><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/started/introduction.html"><!---->Introduction<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/started/spaces.html"><!---->Space<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/started/roles.html"><!---->Roles and scope<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/started/commissionAndFees.html"><!---->Commission and fees<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/started/register.html"><!---->Join Monumental<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><!----><span class="vp-sidebar-title">Guides</span><!----></p><ul class="vp-sidebar-links"><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/guides/artist.html"><!---->Artist<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/guides/collector.html"><!---->Collector<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/guides/ban.html"><!---->Ban principles<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/guides/right_to_be_forgotten.html"><!---->Right to be forgotten<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/guides/snb_artwork.html"><!---->Selling and Buying Artwork<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/guides/spaceManager.html"><!---->Space Manager<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/guides/spaceSubscription.html"><!---->Space Subscription<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/guides/smartContracts.html"><!---->Edition types<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/guides/royalties.html"><!---->Royalties<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><!----><span class="vp-sidebar-title">Legal</span><!----></p><ul class="vp-sidebar-links"><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/legal/space.html"><!---->Space condition<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/legal/tac.html"><!---->Terms and Conditions<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/legal/edition_tac.html"><!---->Monumental Editions Right of Use<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/legal/cookies.html"><!---->Cookie notice<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/legal/privacy_policy.html"><!---->Privacy policy<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/legal/code_of_conduct.html"><!---->Code of conduct<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->AWS</h1><!----><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">On This Page<button type="button" class="print-button" title="Print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#update-ecr-amazon-elastic-container-repository">Update ECR (Amazon Elastic Container Repository)</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#rds-amazon-relational-database-service">RDS - Amazon Relational Database Service</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#uploading-db-from-devnet-optional">Uploading DB from devnet (optional)</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#restoring-from-backup">Restoring from backup</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#update-database-optional">Update database (optional)</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#s3-bucket">S3 bucket</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#ecs-elastic-container-service">ECS - Elastic Container Service</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#task-definition">Task definition</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#recreate-the-service">Recreate the service</a></li><!----><!--]--></ul></li><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h1 id="deploy-on-aws-mainnet" tabindex="-1"><a class="header-anchor" href="#deploy-on-aws-mainnet" aria-hidden="true">#</a> Deploy on AWS MainNet</h1><h2 id="update-ecr-amazon-elastic-container-repository" tabindex="-1"><a class="header-anchor" href="#update-ecr-amazon-elastic-container-repository" aria-hidden="true">#</a> Update ECR (Amazon Elastic Container Repository)</h2><p>In order to run the latest images, we need to upload them to AWS.</p><p>From devnet, go to mnt directory and run the folling command :<br><br><code>root@localhost:~/mnt# ./exportAws.sh</code></p><p>The result is : <br></p><div class="hint-container warning"><p class="hint-container-title">WARNING</p><p>Your password will be stored unencrypted in /root/.docker/config.json.<br><br> Configure a credential helper to remove this warning. See<br><a href="https://docs.docker.com/engine/reference/commandline/login/#credentials-store" target="_blank" rel="noopener noreferrer">https://docs.docker.com/engine/reference/commandline/login/#credentials-store<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><br></p></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Login Succeeded
The push refers to repository [036540172781.dkr.ecr.eu-west-3.amazonaws.com/mnt-fo]
ade0a29d8464: Pushed
ede47eabf033: Pushed
2e8e381c3f6b: Pushed
bba7d2385bc1: Layer already exists
77cae8ab23bf: Layer already exists
latest: digest: sha256:90de4ba66e0d3cb333d6a65c0ecbeb8085928b977d54a29b2eb9d505f1ba7b5d size: 1364
The push refers to repository [036540172781.dkr.ecr.eu-west-3.amazonaws.com/mnt-bo]
48f9b55364d2: Pushed
092a5bfb925b: Pushed
4a231026c010: Pushed
c444dd5606d8: Pushed
c83fcf634ce0: Pushed
9fde8f1b6363: Pushed
774188d25346: Layer already exists
24b1a2faf5b6: Layer already exists
30dec13ff632: Layer already exists
b5f8d2dd387e: Layer already exists
ded7a220bb05: Layer already exists
latest: digest: sha256:ef51d65cb8b42138350a19be3a7bb3636d1c8d8c9b77302a46d3bb4a5ad4f364 size: 2626
The push refers to repository [036540172781.dkr.ecr.eu-west-3.amazonaws.com/mnt-proxy]
517dba7c8da0: Pushed
7235668d6163: Pushed
1d886466c455: Layer already exists
2348e9726bab: Layer already exists
a565521a6b61: Layer already exists
fc9a7040ee93: Layer already exists
c700d3f5f15b: Layer already exists
e75b8fc6a0d5: Layer already exists
8e012198eea1: Layer already exists
latest: digest: sha256:24ef72887b431f97d1113accd634d3c7700b4efa433476222f709eb5fd03e0e2 size: 2196
The push refers to repository [036540172781.dkr.ecr.eu-west-3.amazonaws.com/mnt-db]
87dbd4fccc7e: Layer already exists
9d646cb6b224: Layer already exists
9a3285a0ae18: Layer already exists
cdbb3a99fe55: Layer already exists
e77dd0f2e017: Layer already exists
fd44d9fa9cd4: Layer already exists
daec9799caa3: Layer already exists
ef35264eddcd: Layer already exists
6515074984c6: Layer already exists
latest: digest: sha256:5841ecdbc7370118ff574030d5e6c95bfd4b9009c6df6382d8fdac1295626fb1 size: 2201
The push refers to repository [036540172781.dkr.ecr.eu-west-3.amazonaws.com/mnt-doc]
39ec7289c101: Pushed
07282b29d5ed: Pushed
19b3f25a0bba: Pushed
bba7d2385bc1: Layer already exists
77cae8ab23bf: Layer already exists
latest: digest: sha256:4997a88ec868f781346f83389498d6b02c79e740b6dd6020f58028a5a721c09c size: 1364
The push refers to repository [036540172781.dkr.ecr.eu-west-3.amazonaws.com/mnt-fo-admin]
01dbccedfff4: Pushed
31f3aff653a4: Pushed
11c17f3160d0: Pushed
bba7d2385bc1: Pushed
77cae8ab23bf: Pushed
latest: digest: sha256:870b7ee8b2050ab117c3a6df9aff02ea2fd093ef3c51b6ab071ae28041b6dc58 size: 1364
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="rds-amazon-relational-database-service" tabindex="-1"><a class="header-anchor" href="#rds-amazon-relational-database-service" aria-hidden="true">#</a> RDS - Amazon Relational Database Service</h2><h3 id="uploading-db-from-devnet-optional" tabindex="-1"><a class="header-anchor" href="#uploading-db-from-devnet-optional" aria-hidden="true">#</a> Uploading DB from devnet (optional)</h3><p>From devnet, go to mnt directory and run the following command :<br><code>root@localhost:~/mnt# ./exportDB.sh</code></p><h3 id="restoring-from-backup" tabindex="-1"><a class="header-anchor" href="#restoring-from-backup" aria-hidden="true">#</a> Restoring from backup</h3><p>Connect to EC2 instance</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>ssh <span class="token operator">-</span>i <span class="token operator">~</span><span class="token operator">/</span><span class="token punctuation">.</span>ssh<span class="token operator">/</span>mnt<span class="token operator">-</span>ssh<span class="token punctuation">.</span>pem ec2<span class="token operator">-</span>user@ec2<span class="token operator">-</span><span class="token number">13</span><span class="token operator">-</span><span class="token number">36</span><span class="token operator">-</span><span class="token number">233</span><span class="token operator">-</span><span class="token number">67</span><span class="token punctuation">.</span>eu<span class="token operator">-</span>west<span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">.</span>compute<span class="token punctuation">.</span>amazonaws<span class="token punctuation">.</span>com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Alternative</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>root@localhost:~/mnt# ./connectAWS.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="option-1-winscp" tabindex="-1"><a class="header-anchor" href="#option-1-winscp" aria-hidden="true">#</a> Option 1 : WinSCP</h4><ol><li>Download the file from dev server to your local with WinSCP.</li><li>Once done, upload the file with Filezilla in /tmp</li></ol><div class="hint-container info"><p class="hint-container-title">Info</p><p>FileZilla handles ssh key files, not WinSCP.</p></div><h4 id="option-2-command-line" tabindex="-1"><a class="header-anchor" href="#option-2-command-line" aria-hidden="true">#</a> Option 2 : Command line</h4><div class="hint-container info"><p class="hint-container-title">ssh file</p><p>You need to have install into ~/.ssh the ssh file generated on AWS during your EC2 installation.<br> Also, you have to reduce with a <b>chmod 400</b> the rights file.</p></div><p>Command line</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>scp -i ~/.ssh/mnt-ssh.pem mntDB.sql ec2-user@ec2-13-36-233-67.eu-west-3.compute.amazonaws.com:/tmp
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Alternative</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>uploadDb2Aws.sql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="update-database-optional" tabindex="-1"><a class="header-anchor" href="#update-database-optional" aria-hidden="true">#</a> Update database (optional)</h3><p>If not done yet, don&#39;t forget to grant the admin user.</p><blockquote><p>GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, RELOAD, PROCESS, REFERENCES, INDEX, ALTER, SHOW DATABASES, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, REPLICATION SLAVE, REPLICATION CLIENT, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, CREATE USER, EVENT, TRIGGER ON <em>.</em> TO &#39;admin&#39;@&#39;%&#39; WITH GRANT OPTION;</p></blockquote><p>Then you can user either :</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>sed &#39;s/\sDEFINER=`[^`]*`@`[^`]*`//g&#39; -i /tmp/mntDB.sql
mysql -u admin -pj8wJO4ZrfoNJXM1tFW6V -h mnt-db.c54vrz8apqlw.eu-west-3.rds.amazonaws.com mnt &lt; /tmp/mntDB.sql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>or the provided script :</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code> sudo ./importDB.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="s3-bucket" tabindex="-1"><a class="header-anchor" href="#s3-bucket" aria-hidden="true">#</a> S3 bucket</h3><p>You may adapt the <strong>mnt.prod.env</strong> file.</p><p>Process as follows :</p><ol><li>Connect to your S3 bucket</li><li>Download the file on your local computer</li><li>Make the changes</li><li>Upload the file back to the bucket</li></ol><h2 id="ecs-elastic-container-service" tabindex="-1"><a class="header-anchor" href="#ecs-elastic-container-service" aria-hidden="true">#</a> ECS - Elastic Container Service</h2><blockquote><p>At this stage, the cluster is supposed to be up and running.</p></blockquote><h3 id="task-definition" tabindex="-1"><a class="header-anchor" href="#task-definition" aria-hidden="true">#</a> Task definition</h3><p>Create a new revision of your task definition</p><h3 id="recreate-the-service" tabindex="-1"><a class="header-anchor" href="#recreate-the-service" aria-hidden="true">#</a> Recreate the service</h3><p>Delete and recreate the service</p></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><!----><!----></div></footer><!----><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">Monumental | Copyright © 2023</div><!----></footer></div><!--]--><!--]--></div>
    <script type="module" src="/assets/app-85cd6e35.js" defer></script>
  </body>
</html>
